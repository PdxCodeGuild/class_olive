<!DOCTYPE html>
<html lang="en">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Rest App</title>
</head>
<body>
    {% csrf_token %}
<div id="app">
    
    <div class="flex flex-col items-center border-b h-[5rem]">
        <h1>[[message]] [[this.currentUser.username]]!</h1>
        <div>
            {% if user.is_authenticated == False %}
                <a href="{% url 'login' %}" class="p-1">Login</a>
                <a href="{% url 'signup' %}" class="p-1">Sign up</a>
            {% endif %}
            {% if user.is_authenticated %}
                <a href="{% url 'profile' user.username%}" class="p-1">Profile</a>
                <a href="{% url 'logout' %}" class="p-1">Logout</a>
            {% endif %}
            
        </div>
        <a :href=" 'bob/' + [[message]] " class="p-1">bob</a>
    </div>

    
    <br>
    
    <div class="flex items-center flex-col">
        <input type="text" placeholder="Title" v-model="newMovie.title" class="border w-[10rem]">
        <input type="text" placeholder="Genre" v-model="newMovie.genre" class="border w-[10rem]">
        <button @click="createMovie">Submit</button>
    </div>

    <br>
    
    <div class="border flex flex-wrap justify-evenly">
        <div  v-for="(film, index) in movie"  class="flex items-center flex-col h-[15rem] w-[15rem] border">
            <div :id="'post-div' + index" class="post-div">
                <p class="border">[[film.title]] [[film.director_detail.username]] [[film.genre]]</p>
                <button @click="deleteMovie(film.id)">DELETE</button>
                <br>
                <button class="edit-button" @click="switchToEdit(index, film.title, film.genre)">edit</button>

            </div>
            <div :id="'edit-div' + index" class="edit-div hidden">
                <input :id="'title-input' + index" v-model="editTitle" type="text" placeholder="Title"  class="border w-[10rem]">
                <input :id="'genre-input' + index" v-model="editGenre" type="text" placeholder="Genre"  class="border w-[10rem]">
                <button @click="editMovie(film.id)">Submit</button>
            </div>
        </div>
    </div>


</div>


<!-- Import Ajax -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<!-- Import Vue.js -->
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<!-- Import file.js -->
<script src="{% static '/app.js' %}"></script> 

<!-- Mount App -->
<script> const mountApp = app.mount('#app') </script>


</body>
</html>